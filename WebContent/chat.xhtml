<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      >
<h:head>
      	<meta charset="utf-8"/>
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>EsiScrum</title>

	<link href="https://fonts.googleapis.com/css?family=Roboto:400,300,100,500,700,900" rel="stylesheet" type="text/css" />
	<link href="assets/css/icons/icomoon/styles.css" rel="stylesheet" type="text/css" />
	<link href="assets/css/bootstrap.css" rel="stylesheet" type="text/css" />
	<link href="assets/css/core.css" rel="stylesheet" type="text/css" />
	<link href="assets/css/components.css" rel="stylesheet" type="text/css" />
	<link href="assets/css/colors.css" rel="stylesheet" type="text/css" />
	<!-- /global stylesheets -->


	<script type="text/javascript" src="assets/js/plugins/loaders/pace.min.js"></script>

	<script type="text/javascript" src="assets/js/core/libraries/bootstrap.min.js"></script>
	<script type="text/javascript" src="assets/js/plugins/loaders/blockui.min.js"></script>
	<!-- /core JS files -->

	<!-- Theme JS files -->
	<script type="text/javascript" src="assets/js/plugins/notifications/bootbox.min.js"></script>
	<script type="text/javascript" src="assets/js/plugins/notifications/sweet_alert.min.js"></script>
	<script type="text/javascript" src="assets/js/plugins/forms/selects/select2.min.js"></script>
	
	<script type="text/javascript" src="assets/js/core/app.js"></script>
	<script type="text/javascript" src="assets/js/pages/components_modals.js"></script>
	
	
	
	
	<script type="text/javascript" src="assets/js/core/libraries/jquery_ui/widgets.min.js"></script>
	<script type="text/javascript" src="assets/js/core/libraries/jquery_ui/interactions.min.js"></script>
	<script type="text/javascript" src="assets/js/plugins/forms/styling/switchery.min.js"></script>
	<script type="text/javascript" src="assets/js/plugins/forms/styling/switch.min.js"></script>
	<script type="text/javascript" src="assets/js/plugins/forms/styling/uniform.min.js"></script>
	<script type="text/javascript" src="assets/js/plugins/forms/selects/select2.min.js"></script>
	<script type="text/javascript" src="assets/js/plugins/forms/selects/bootstrap_multiselect.js"></script>
	<script type="text/javascript" src="assets/js/plugins/forms/selects/selectboxit.min.js"></script>
	<script type="text/javascript" src="assets/js/plugins/forms/selects/bootstrap_select.min.js"></script>
	<script type="text/javascript" src="assets/js/plugins/forms/inputs/touchspin.min.js"></script>
	<script type="text/javascript" src="assets/js/plugins/sliders/nouislider.min.js"></script>

	
	
	
	
	
	
		<script type="text/javascript" src="assets/js/plugins/notifications/jgrowl.min.js"></script>
	<script type="text/javascript" src="assets/js/plugins/ui/moment/moment.min.js"></script>
	<script type="text/javascript" src="assets/js/plugins/pickers/daterangepicker.js"></script>
	<script type="text/javascript" src="assets/js/plugins/pickers/anytime.min.js"></script>
	<script type="text/javascript" src="assets/js/plugins/pickers/pickadate/picker.js"></script>
	<script type="text/javascript" src="assets/js/plugins/pickers/pickadate/picker.date.js"></script>
	<script type="text/javascript" src="assets/js/plugins/pickers/pickadate/picker.time.js"></script>
	<script type="text/javascript" src="assets/js/plugins/pickers/pickadate/legacy.js"></script>
	<script type="text/javascript" src="assets/js/pages/picker_date.js"></script>
	
	



	<script type="text/javascript" src="assets/js/core/libraries/jquery_ui/core.min.js"></script>
	<script type="text/javascript" src="assets/js/plugins/forms/selects/selectboxit.min.js"></script>
	
	<!-- Core JS files -->
	
	
	
		
	
	<script type="text/javascript" src="assets/js/pages/form_selectbox.js"></script>



<script type="text/javascript" src="js/backlog.js"></script>
</h:head>
<h:body onload="initchat()">
    <h:form id="formAjax" class="form-horizontal">
	<!-- Main navbar -->
	<div class="navbar navbar-inverse">
		<div class="navbar-header">
			<a style="margin-left: 10px"  href="index.html"><img src="image/laga.png" alt="" /></a>
		</div>



<h:inputHidden value="#{esiscrumBean.ppcurrent}"   id="ppcurrent" valueChangeListener="#{esiscrumBean.changeproject}"   />


		<div class="navbar-collapse collapse" id="navbar-mobile">
			<ul class="nav navbar-nav">
				<li><a  style="font-size: 16px; margin-right:10px" href="project.xhtml">Project</a></li>
				<li><a  href="people.xhtml" style="font-size: 16px; margin-right:10px">People</a></li>
				<li><a href="backlog.xhtml" style="font-size: 16px; margin-right:10px" >Backlog</a></li>
				<li><a href="sprint.xhtml" style="font-size: 16px; margin-right:10px">Sprint</a></li>
				<li><a href="taskboard.xhtml" style="font-size: 16px; margin-right:10px">Task board</a></li>
				<li><a href="sprintchart.xhtml" style="font-size: 16px; margin-right:10px">Sprint chart</a></li>
					<li><a href="burndown.xhtml" style="font-size: 16px; margin-right:10px">Burndown</a></li>
				<li><a href="chat.xhtml" style="font-size: 16px; margin-right:10px">Chat</a></li>
			</ul>



			<div class="navbar-right">
				<ul class="nav navbar-nav">
				
				<li class="dropdown" style="margin-top:4px;margin-right:4px;">
				
								<h:selectOneMenu  value="#{esiscrumBean.currentProject.id}" class="selectbox" valueChangeListener="#{esiscrumBean.ChangeCurrentProject}" onchange="submit()">
										
					<f:selectItems value="#{esiscrumBean.listproject}" var="mp" 
       							 itemLabel="#{mp.nom}" itemValue="#{mp.id}" />
							
						</h:selectOneMenu>
				</li>							
											

					
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">
							<i class="icon-people"></i>
							<span class="visible-xs-inline-block position-right">Users</span>
						</a>
						
						<div class="dropdown-menu dropdown-content">
							<div class="dropdown-content-heading">
								People
								<ul class="icons-list">
									<li><a href="people.xhtml"><i class="icon-gear"></i></a></li>
								</ul>
							</div>

							<ul class="media-list dropdown-content-body width-300">
							
							<ui:repeat value="#{esiscrumBean.listMembre}" var="b" varstatus="status">
								<li class="media">
									<div class="media-left"><img src="#{b.image}" class="img-circle img-sm" alt=""/></div>
									<div class="media-body">
										<a href="#" class="media-heading text-semibold">#{b.username}</a>
										<span class="display-block text-muted text-size-small">#{b.nom}&nbsp;#{b.prenom}</span>
									</div>
									<div class="media-right media-middle"><span class="status-mark border-success"></span></div>
								</li>

							</ui:repeat>
							</ul>

							<div class="dropdown-content-footer">
								<a href="#" data-popup="tooltip" title="All users"><i class="icon-menu display-block"></i></a>
							</div>
						</div>
					</li>

					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown">
							<i class="icon-bubbles4"></i>
							<span class="visible-xs-inline-block position-right">Messages</span>
							
						</a>
						
						<div class="dropdown-menu dropdown-content width-350">
							<div class="dropdown-content-heading">
								Messages
								<ul class="icons-list">
									<li><a href="chat.xhtml"><i class="icon-compose"></i></a></li>
								</ul>
							</div>

							<ul class="media-list dropdown-content-body">


	
<ui:repeat value="#{esiscrumBean.listchat}"  var="m" varstatus="status">
								<li class="media">
									<div class="media-left"><img src="#{m.user.image}" class="img-circle img-sm" alt=""/></div>
									<div class="media-body">
										<a href="#" class="media-heading">
											<span class="text-semibold">#{m.user.username}</span>
											<span class="media-annotation pull-right">#{m.date}</span>
										</a>

										<span class="text-muted">#{m.message}</span>
									</div>
								</li>

</ui:repeat>


							</ul>

							<div class="dropdown-content-footer">
								<a href="chat.xhtml" data-popup="tooltip" title="All messages"><i class="icon-menu display-block"></i></a>
							</div>
						</div>
					</li>

					<li class="dropdown dropdown-user">
						<a class="dropdown-toggle" data-toggle="dropdown">
							<img src="#{esiscrumBean.currentMembre.image}" alt=""/>
							<span>#{esiscrumBean.currentMembre.username}</span>
							<i class="caret"></i>
						</a>

						<ul class="dropdown-menu dropdown-menu-right">
							<li><a href="profile.xhtml"><i class="icon-user-plus"></i> My profile</a></li>
							<li><a href="chat.xhtml"><i class="icon-comment-discussion"></i> Messages</a></li>
							<li class="divider"></li>
							<li><a href="login.xhtml"><i class="icon-switch2"></i> Logout</a></li>
						</ul>
					</li>
				</ul>
			</div>
		</div>
	</div>
	<!-- /main navbar -->


	<!-- Page container -->
	<div class="page-container">

		<!-- Page content -->
		<div class="page-content">

			<!-- Main content -->
			<div class="content-wrapper">

				<!-- Content area -->
				<div class="content">


	<div class="raw">

							
	<div class="col-md-12">

						<!-- Basic layout -->
					<p:panel class="panel panel-flat" id="panelchat">
			
						<div class="panel-heading">
							<h6 class="panel-title"></h6>
							<div class="heading-elements">
								<ul class="icons-list">
			                		<li><a data-action="collapse"></a></li>
			                		<li><a data-action="reload"></a></li>
			                		<li><a data-action="close"></a></li>
			                	</ul>
		                	</div>
						</div>

						<div class="panel-body">
							<ul class="media-list chat-list content-group">
				

<ui:repeat value="#{esiscrumBean.listchat}" id="listchat" var="m" varstatus="status">

<ui:fragment rendered="#{m.user.id == esiscrumBean.currentMembre.id}">
								<li class="media reversed">
									<div class="media-body">
										<div class="media-content">#{m.message}</div>
										<span class="media-annotation display-block mt-10">#{m.user.username}&nbsp; : #{m.date}<a href="#"><i class="icon-pin-alt position-right text-muted"></i></a></span>
									</div>

									<div class="media-right">
										<a href="#{m.user.image}">
											<img src="#{m.user.image}" class="img-circle img-md" alt=""/>
										</a>
									</div>
								</li>
</ui:fragment>
<ui:fragment rendered="#{m.user.id != esiscrumBean.currentMembre.id}">
								<li class="media">
									<div class="media-left">
										<a href="#{m.user.image}">
											<img src="#{m.user.image}" class="img-circle img-md" alt=""/>
										</a>
									</div>

									<div class="media-body">
										<div class="media-content">#{m.message}</div>
										<span class="media-annotation display-block mt-10">#{m.user.username}&nbsp; : #{m.date}<a href="#"><i class="icon-pin-alt position-right text-muted"></i></a></span>
									</div>
								</li>

</ui:fragment>
</ui:repeat>


								
								<li class="media reversed" style="display: none;" id="messageon">
									<div class="media-body">
										<div class="media-content"><i class="icon-menu display-block"></i></div>
									</div>

									<div class="media-right">
										<a href="#{esiscrumBean.currentMembre.image}">
											<img src="#{esiscrumBean.currentMembre.image}" class="img-circle img-md" alt=""/>
										</a>
									</div>
								</li>
								
								<li class="media reversed" style="display: none;" id="lastmessage">
									<div class="media-body">
										<div class="media-content"><i class="icon-menu display-block"></i></div>
									</div>

									<div class="media-right">
										<a href="#{esiscrumBean.currentMembre.image}">
											<img src="#{esiscrumBean.currentMembre.image}" class="img-circle img-md" alt=""/>
										</a>
									</div>
								</li>
								
								
							</ul>

	                    	
                   <h:inputTextarea rows="5" cols="5"  class="form-control content-group" value="#{esiscrumBean.currentMessage.message}" onkeyup="MessageOn()" />

	                    	<div class="row">
	                    		<div class="col-xs-6">

	                    		</div>

	                    		<div class="col-xs-6 text-right">
		                            
	                    		

			
			
			<h:commandButton  value="Enregister" actionListener="#{esiscrumBean.newMessage}" class="btn btn-primary icon-check">
<f:ajax render=":formAjax:panelchat" execute="@form" event="keyup" />
				
			</h:commandButton>
	                    		
	                    		</div>
	                    	</div>
						</div>
					</p:panel>
					<!-- /basic layout -->

	</div>	
	</div>
				</div>
				<!-- /content area -->

			</div>
			<!-- /main content -->

		</div>
		<!-- /page content -->

	</div>
	<!-- /page container -->

    </h:form>
</h:body>
</html>